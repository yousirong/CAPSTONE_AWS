module.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t){e.exports=require("vscode")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const o=n(6),r=n(0);t.exists=async e=>{try{return await r.workspace.fs.stat(r.Uri.file(e)),!0}catch{return!1}},t.properRelative=function(e,t){var n,r;return(null===(n=o.posix)||void 0===n?void 0:n.isAbsolute(e))?o.posix.relative(e,t):(null===(r=o.win32)||void 0===r?void 0:r.isAbsolute(e))?o.win32.relative(e,t):o.relative(e,t)};let i="win32"!==e.platform;t.resetCaseSensitivePaths=function(){i="win32"!==e.platform},t.setCaseSensitivePaths=function(e){i=e},t.getCaseSensitivePaths=function(){return i},t.lowerCaseInsensitivePath=function(e){return i?e:e.toLowerCase()},t.maybeFileUrlToPath=function(e){return e.startsWith("file:///")?(e=e.replace("file:///",""),"/"===(e=decodeURIComponent(e))[0]||e.match(/^[A-Za-z]:/)||(e="/"+e),t.isWindowsPath(e)&&(e=e[0].toLowerCase()+e.substr(1)),e):e},t.isWindowsPath=e=>/^[A-Za-z]:/.test(e)}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(1),i=n(6),s=n(15),a=n(3);t.openLocation=async({rootPath:e,location:t,viewColumn:n,callFrame:r})=>{t&&await l(e,t,n)||r&&await u(r,n)||o.window.showErrorMessage("Could not find the file in your workspace")};const c=async(e,t,n,r)=>{const i=new o.Position(Math.max(0,t-1),Math.max(0,n-1));await o.window.showTextDocument(e,{viewColumn:r,selection:new o.Range(i,i)})},l=async(e,n,i)=>{const s=t.getCandidateDiskPaths(e,n.source),a=(await Promise.all(s.map(r.exists))).findIndex(e=>e);if(-1===a)return!1;const l=await o.workspace.openTextDocument(o.Uri.file(s[a]));return await c(l,n.lineNumber,n.columnNumber,i),!0},u=async({url:e,lineNumber:t,columnNumber:n},r)=>{var l,u;let d;try{d=new URL(e)}catch{return!1}if("http:"!==d.protocol&&"https:"!==d.protocol)return!1;const f=i.resolve(null!==(u=null===(l=o.workspace.workspaceFolders)||void 0===l?void 0:l[0].uri.fsPath)&&void 0!==u?u:s.tmpdir(),d.pathname.slice(1)||"index.js"),m=await o.workspace.openTextDocument(o.Uri.file(f).with({scheme:a.DownloadFileProvider.scheme,query:e}));return await c(m,t+1,n+1,r),!0};t.getCandidateDiskPaths=(e,t)=>{var n;if(!t.path)return[];const s=[t.path];if(!e)return s;for(const a of null!==(n=o.workspace.workspaceFolders)&&void 0!==n?n:[])s.push(i.resolve(a.uri.fsPath,r.properRelative(e,t.path)));return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(16);class i{async provideTextDocumentContent(e){return o.window.withProgress({location:o.ProgressLocation.Notification,title:`Retrieving ${e.query}...`},async()=>{try{const t=await r.default(e.query,{}),n=await t.text();return t.ok?n:`Unexpected ${t.status} from ${e.query}: ${n}`}catch(e){return e.stack}})}}t.DownloadFileProvider=i,i.scheme="js-viz-download"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(14);t.bundlePage=async(e,t)=>{const n=o.makeNonce();return`<!DOCTYPE html>\n    <html lang="en">\n    <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      ${o.nonceHeader(n)}\n      <title>Profile Custom Editor</title>\n    </head>\n    <body>\n      <script type="text/javascript" nonce="${n}">\n        ${Object.entries(t).map(([e,t])=>`globalThis.${e} = ${JSON.stringify(t)}`).join(";")}\n      <\/script>\n      <script nonce="${n}" src="${e}"><\/script>\n    </body>\n    </html>\n  `}},function(e,t){var n,o,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,l=[],u=!1,d=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&m())}function m(){if(!u){var e=a(f);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||u||a(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){(function(e){function n(e,t){for(var n=0,o=e.length-1;o>=0;o--){var r=e[o];"."===r?e.splice(o,1):".."===r?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function o(e,t){if(e.filter)return e.filter(t);for(var n=[],o=0;o<e.length;o++)t(e[o],o,e)&&n.push(e[o]);return n}t.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,r="/"===s.charAt(0))}return(r?"/":"")+(t=n(o(t.split("/"),(function(e){return!!e})),!r).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),s="/"===r(e,-1);return(e=n(o(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function o(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var r=o(e.split("/")),i=o(n.split("/")),s=Math.min(r.length,i.length),a=s,c=0;c<s;c++)if(r[c]!==i[c]){a=c;break}var l=[];for(c=a;c<r.length;c++)l.push("..");return(l=l.concat(i.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,o=-1,r=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!r){o=i;break}}else r=!1;return-1===o?n?"/":".":n&&1===o?"/":e.slice(0,o)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,o=-1,r=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!r){n=t+1;break}}else-1===o&&(r=!1,o=t+1);return-1===o?"":e.slice(n,o)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,o=-1,r=!0,i=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===o&&(r=!1,o=s+1),46===a?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!r){n=s+1;break}}return-1===t||-1===o||0===i||1===i&&t===o-1&&t===n+1?"":e.slice(t,o)};var r="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ReadonlyCustomDocument=class{constructor(e,t){this.uri=e,this.userData=t}dispose(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);t.reopenWithEditor=function(e,t,n){n&&!o.extensions.all.some(e=>e.id===n)?o.commands.executeCommand("workbench.extensions.action.showExtensionsWithIds",[n]):o.commands.executeCommand("vscode.openWith",e,t,o.ViewColumn.Active)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(18),i=n(2),s=/[^/\\]+$/;t.getBasename=e=>{var t,n;return null!==(n=null===(t=s.exec(e))||void 0===t?void 0:t[0])&&void 0!==n?n:e};t.ProfileAnnotations=class{constructor(){this.basenamesToExpand=new Map}add(e,n){var s;const a=r.once(()=>{this.set(n.callFrame.url,new o.Position(Math.max(0,n.callFrame.lineNumber),Math.max(0,n.callFrame.columnNumber)),n);const t=n.src;if(t&&0===t.source.sourceReference&&t.source.path&&t.source.path!==n.callFrame.url)for(const r of i.getCandidateDiskPaths(e,t.source))this.set(r,new o.Position(Math.max(0,t.lineNumber-1),Math.max(0,t.columnNumber-1)),n)});this.addExpansionFn(t.getBasename(n.callFrame.url),a),(null===(s=n.src)||void 0===s?void 0:s.source.path)&&this.addExpansionFn(t.getBasename(n.src.source.path),a)}addExpansionFn(e,t){let n=this.basenamesToExpand.get(e);n||(n=[],this.basenamesToExpand.set(e,n)),n.push(t)}expandForFile(e){const n=t.getBasename(e),o=this.basenamesToExpand.get(n);if(o){for(const e of o)e();this.basenamesToExpand.delete(n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.categorize=(e,t)=>(e.functionName=e.functionName||"(anonymous)",e.lineNumber<0?0:e.url.includes("node_modules")||!t?2:1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(21);t.getBestLocation=(e,t=[])=>{var n;if(!(null===(n=e.$vscode)||void 0===n?void 0:n.rootPath))return t[0];for(const n of t){const t=o.addRelativeDiskPath(e.$vscode.rootPath,n);if(t.relativePath)return t}return t[0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(13),i=n(3),s=n(22),a=n(27);t.activate=function(e){const t=new a.ProfileCodeLensProvider;e.subscriptions.push(o.window.registerCustomEditorProvider("jsProfileVisualizer.cpuprofile.table",new r.CpuProfileEditorProvider(t,o.Uri.joinPath(e.extensionUri,"out","cpu-client.bundle.js"))),o.window.registerCustomEditorProvider("jsProfileVisualizer.heapprofile.table",new s.HeapProfileEditorProvider(t,o.Uri.joinPath(e.extensionUri,"out","heap-client.bundle.js"))),o.workspace.registerTextDocumentContentProvider("js-viz-download",new i.DownloadFileProvider),o.languages.registerCodeLensProvider("*",t),o.commands.registerCommand("extension.jsProfileVisualizer.table.clearCodeLenses",()=>t.clear()))},t.deactivate=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(4),i=n(2),s=n(7),a=n(8),c=n(17),l=n(20);t.CpuProfileEditorProvider=class{constructor(e,t,n={}){this.lens=e,this.bundle=t,this.extraConsts=n,this.onDidChangeCustomDocument=(new o.EventEmitter).event}async openCustomDocument(e){const t=await o.workspace.fs.readFile(e),n=JSON.parse((new TextDecoder).decode(t)),r=new s.ReadonlyCustomDocument(e,l.buildModel(n)),i=new c.CpuProfileAnnotations,a=r.userData.rootPath;for(const e of r.userData.locations)i.add(a,e);return this.lens.registerLenses(i),r}async resolveCustomEditor(e,t){t.webview.onDidReceiveMessage(t=>{var n;switch(t.type){case"openDocument":return void i.openLocation({rootPath:null===(n=e.userData)||void 0===n?void 0:n.rootPath,viewColumn:t.toSide?o.ViewColumn.Beside:o.ViewColumn.Active,callFrame:t.callFrame,location:t.location});case"reopenWith":return void a.reopenWithEditor(e.uri,t.viewType,t.requireExtension);default:console.warn(`Unknown request from webview: ${JSON.stringify(t)}`)}}),t.webview.options={enableScripts:!0},t.webview.html=await r.bundlePage(t.webview.asWebviewUri(this.bundle),{MODEL:e.userData,...this.extraConsts})}async saveCustomDocument(){}async revertCustomDocument(){}async backupCustomDocument(){return{id:"",delete:()=>{}}}saveCustomDocumentAs(e,t){return o.workspace.fs.copy(e.uri,t,{overwrite:!0})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t.makeNonce=function(e=32){let t="";for(let n=0;n<e;n++)t+=o[Math.floor(Math.random()*o.length)];return t},t.nonceHeader=e=>`<meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline'; script-src 'nonce-${e}';">`},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},function(e,t,n){"use strict";var o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==o)return o;throw new Error("unable to locate global object")}();e.exports=t=o.fetch,o.fetch&&(t.default=o.fetch.bind(o)),t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(1),i=n(9),s=n(19);class a extends i.ProfileAnnotations{constructor(){super(...arguments),this.data=new Map}set(e,t,n){var i;let s=this.data.get(r.lowerCaseInsensitivePath(e));s||(s=[],this.data.set(r.lowerCaseInsensitivePath(e),s));let a=0;for(;a<s.length&&s[a].position.line<t.line;)a++;if((null===(i=s[a])||void 0===i?void 0:i.position.line)===t.line){const e=s[a];t.character<e.position.character&&(e.position=new o.Position(t.line,t.character)),e.data.aggregateTime+=n.aggregateTime,e.data.selfTime+=n.selfTime,e.data.ticks+=n.ticks}else s.splice(a,0,{position:new o.Position(t.line,t.character),data:{aggregateTime:n.aggregateTime,selfTime:n.selfTime,ticks:n.ticks}})}getLensesForFile(e){var t,n;return this.expandForFile(e),null!==(n=null===(t=this.data.get(r.lowerCaseInsensitivePath(e)))||void 0===t?void 0:t.map(({position:e,data:t})=>{if(0===t.aggregateTime&&0===t.selfTime)return[];const n=new o.Range(e,e);return[new o.CodeLens(n,{title:`${s.decimalFormat.format(t.selfTime/1e3)}ms Self Time, `+`${s.decimalFormat.format(t.aggregateTime/1e3)}ms Total`,command:""}),new o.CodeLens(n,{title:"Clear",command:"extension.jsProfileVisualizer.table.clearCodeLenses"})]}).reduce((e,t)=>[...e,...t],[]))&&void 0!==n?n:[]}}t.CpuProfileAnnotations=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.binarySearch=function(e,t){let n=0,o=e.length-1;for(;n<=o;){const r=(n+o)/2|0,i=t(e[r]);if(i<0)n=r+1;else{if(!(i>0))return r;o=r-1}}return-(n+1)},t.addToSet=(e,t)=>{const n=new Set([...e,t]);return n.add(t),n},t.removeFromSet=(e,t)=>{const n=new Set([...e]);return n.delete(t),n},t.toggleInSet=(e,t)=>{const n=new Set([...e]);return n.has(t)?n.delete(t):n.add(t),n};const o=Symbol("unset");t.once=e=>{let t=o;return()=>(t===o&&(t=e()),t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decimalFormat=new Intl.NumberFormat(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(10),r=n(11),i=n(1),s=(e,t)=>{const n=t[e];if(n.aggregateTime)return n.aggregateTime;let o=n.selfTime;for(const e of n.children)o+=s(e,t);return n.aggregateTime=o};t.buildModel=e=>{var t,n,a;if(!e.timeDeltas||!e.samples)return{nodes:[],locations:[],samples:e.samples||[],timeDeltas:e.timeDeltas||[],rootPath:null===(t=e.$vscode)||void 0===t?void 0:t.rootPath,duration:e.endTime-e.startTime};const{samples:c,timeDeltas:l}=e,u=(e=>{var t;if(e.$vscode)return e.$vscode.locations;let n=0;const o=new Map,r=e=>{const t=[e.functionName,e.url,e.scriptId,e.lineNumber,e.columnNumber].join(":"),r=o.get(t);if(r)return r.id;const s=n++;return o.set(t,{id:s,callFrame:e,location:{lineNumber:e.lineNumber+1,columnNumber:e.columnNumber+1,source:{name:i.maybeFileUrlToPath(e.url),path:i.maybeFileUrlToPath(e.url),sourceReference:0}}}),s};for(const n of e.nodes)n.locationId=r(n.callFrame),n.positionTicks=null===(t=n.positionTicks)||void 0===t?void 0:t.map(e=>({...e,startLocationId:r({...n.callFrame,lineNumber:e.line-1,columnNumber:0}),endLocationId:r({...n.callFrame,lineNumber:e.line,columnNumber:0})}));return[...o.values()].sort((e,t)=>e.id-t.id).map(e=>({locations:[e.location],callFrame:e.callFrame}))})(e).map((t,n)=>{const i=r.getBestLocation(e,t.locations);return{id:n,selfTime:0,aggregateTime:0,ticks:0,category:o.categorize(t.callFrame,i),callFrame:t.callFrame,src:i}}),d=new Map,f=e=>{let t=d.get(e);return void 0===t&&(t=d.size,d.set(e,t)),t},m=new Array(e.nodes.length);for(let t=0;t<e.nodes.length;t++){const o=e.nodes[t],r=f(o.id);m[r]={id:r,selfTime:0,aggregateTime:0,locationId:o.locationId,children:(null===(n=o.children)||void 0===n?void 0:n.map(f))||[]};for(const e of o.positionTicks||[])e.startLocationId&&(u[e.startLocationId].ticks+=e.ticks)}for(const e of m)for(const t of e.children)m[t].parent=e.id;for(let e=1;e<l.length;e++)m[f(c[e])].selfTime+=l[e-1];for(let e=0;e<m.length;e++){const t=m[e],n=u[t.locationId];n.aggregateTime+=s(e,m),n.selfTime+=t.selfTime}return{nodes:m,locations:u,samples:c.map(f),timeDeltas:l,rootPath:null===(a=e.$vscode)||void 0===a?void 0:a.rootPath,duration:e.endTime-e.startTime}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);t.addRelativeDiskPath=(e,t)=>t.source.path&&0===t.source.sourceReference?{...t,relativePath:o.properRelative(e,t.source.path)}:t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(4),i=n(2),s=n(7),a=n(8),c=n(23),l=n(25),u=n(26);t.HeapProfileEditorProvider=class{constructor(e,t,n={}){this.lens=e,this.bundle=t,this.extraConsts=n,this.onDidChangeCustomDocument=(new o.EventEmitter).event}async openCustomDocument(e){const t=await o.workspace.fs.readFile(e),n=JSON.parse((new TextDecoder).decode(t)),r=new s.ReadonlyCustomDocument(e,l.buildModel(n)),i=u.createTree(r.userData),a=[i];let d=[i];for(;d.length;){const e=d.pop();e&&(a.push(e),d=d.concat(Object.values(e.children)))}const f=new c.HeapProfileAnnotations,m=r.userData.rootPath;for(const e of a)f.add(m,e);return this.lens.registerLenses(f),r}async resolveCustomEditor(e,t){t.webview.onDidReceiveMessage(t=>{switch(t.type){case"openDocument":return void i.openLocation({rootPath:void 0,viewColumn:t.toSide?o.ViewColumn.Beside:o.ViewColumn.Active,callFrame:t.callFrame,location:t.location});case"reopenWith":return void a.reopenWithEditor(e.uri,t.viewType,t.requireExtension);default:console.warn(`Unknown request from webview: ${JSON.stringify(t)}`)}}),t.webview.options={enableScripts:!0},t.webview.html=await r.bundlePage(t.webview.asWebviewUri(this.bundle),{MODEL:e.userData,...this.extraConsts})}async saveCustomDocument(){}async revertCustomDocument(){}async backupCustomDocument(){return{id:"",delete:()=>{}}}saveCustomDocumentAs(e,t){return o.workspace.fs.copy(e.uri,t,{overwrite:!0})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(1),i=n(9),s=n(24);class a extends i.ProfileAnnotations{constructor(){super(...arguments),this.data=new Map}set(e,t,n){var i;let s=this.data.get(r.lowerCaseInsensitivePath(e));s||(s=[],this.data.set(r.lowerCaseInsensitivePath(e),s));let a=0;for(;a<s.length&&s[a].position.line<t.line;)a++;if((null===(i=s[a])||void 0===i?void 0:i.position.line)===t.line){const e=s[a];t.character<e.position.character&&(e.position=new o.Position(t.line,t.character)),e.data.totalSize+=n.totalSize,e.data.selfSize+=n.selfSize}else s.splice(a,0,{position:new o.Position(t.line,t.character),data:{totalSize:n.totalSize,selfSize:n.selfSize}})}getLensesForFile(e){var t,n;return this.expandForFile(e),null!==(n=null===(t=this.data.get(r.lowerCaseInsensitivePath(e)))||void 0===t?void 0:t.map(({position:e,data:t})=>{if(0===t.totalSize&&0===t.selfSize)return[];const n=new o.Range(e,e);return[new o.CodeLens(n,{title:`${s.decimalFormat.format(t.selfSize/1e3)}kB Self Size, `+`${s.decimalFormat.format(t.totalSize/1e3)}kB Total Size`,command:""}),new o.CodeLens(n,{title:"Clear",command:"extension.jsProfileVisualizer.table.clearCodeLenses"})]}).reduce((e,t)=>[...e,...t],[]))&&void 0!==n?n:[]}}t.HeapProfileAnnotations=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decimalFormat=new Intl.NumberFormat(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(11),r=n(1);t.buildModel=e=>{var t;let n=[e.head];const i=(e=>{if(e.$vscode)return e.$vscode.locations;let t=0;const n=new Map,o=e=>{const o=[e.functionName,e.url,e.scriptId,e.lineNumber,e.columnNumber].join(":"),i=n.get(o);if(i)return i.id;const s=t++;return n.set(o,{id:s,callFrame:e,location:{lineNumber:e.lineNumber+1,columnNumber:e.columnNumber+1,source:{name:r.maybeFileUrlToPath(e.url),path:r.maybeFileUrlToPath(e.url),sourceReference:0}}}),s};let i=[e.head];for(;i.length;){const e=i.pop();if(e){const{callFrame:t}=e;e.locationId=o(t),i=i.concat(e.children)}}return[...n.values()].sort((e,t)=>e.id-t.id).map(e=>({locations:[e.location],callFrame:e.callFrame}))})(e);for(;n.length;){const t=n.pop();t&&(t.locationId&&(t.src=o.getBestLocation(e,i[t.locationId].locations)),n=n.concat(t.children))}return{head:e.head,samples:e.samples,rootPath:null===(t=e.$vscode)||void 0===t?void 0:t.rootPath}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(10);class r{constructor(e,t){this.node=e,this.parent=t,this.children={},this.totalSize=0,this.selfSize=0,this.childrenSize=0,this.category=o.categorize(e.callFrame,void 0)}static root(){return new r({id:-1,selfSize:0,children:[],callFrame:{functionName:"(root)",lineNumber:-1,columnNumber:-1,scriptId:"0",url:""}})}get id(){return this.node.id}get callFrame(){return this.node.callFrame}get src(){return this.node.src}toJSON(){return{category:this.category,children:this.children,childrenSize:this.childrenSize,selfSize:this.selfSize,totalSize:this.totalSize,id:this.id,callFrame:this.callFrame,src:this.src}}}t.TreeNode=r;const i=(e,t)=>{const n=new r(e,t);e.children.forEach(e=>{const t=i(e,n);n.children[t.id]=t,n.childrenSize++}),n.selfSize=e.selfSize,n.totalSize=e.selfSize;for(const e in n.children)n.totalSize+=n.children[e].totalSize;return n};t.createTree=e=>{const t=r.root();for(const n of e.head.children){const e=i(n,t);t.children[e.id]=e,t.childrenSize++}for(const e in t.children)t.totalSize+=t.children[e].totalSize;return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(3),i=n(1);t.ProfileCodeLensProvider=class{constructor(){this.changeEmitter=new o.EventEmitter,this.onDidChangeCodeLenses=this.changeEmitter.event}registerLenses(e){return o.commands.executeCommand("setContext","jsProfileVisualizer.hasCodeLenses",!0),this.lenses=e,{dispose:()=>{this.lenses===e&&this.clear()}}}clear(){this.lenses&&(this.lenses=void 0,o.commands.executeCommand("setContext","jsProfileVisualizer.hasCodeLenses",!1),this.changeEmitter.fire())}provideCodeLenses(e){var t,n;const o=null===(t=this.lenses)||void 0===t?void 0:t.getLensesForFile(i.lowerCaseInsensitivePath(e.uri.fsPath));if(o)return o;const s=e.uri.scheme===r.DownloadFileProvider.scheme?null===(n=this.lenses)||void 0===n?void 0:n.getLensesForFile(e.uri.query):void 0;return s||[]}}}]);